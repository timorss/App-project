<!DOCTYPE html>
<html ng-app="trempApp" lang="en">
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="style.css">
		<link rel="stylesheet" type="text/css" href="media_screen.css">
		<link rel="stylesheet" type="text/css" href="search-tremps-style.css">
		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<title>פרויקט סיום</title>
		<meta name="description" content="">
		<meta name="author" content="timor">

		<meta name="viewport" content="width=device-width; initial-scale=1.0">

		<!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
		<link rel="shortcut icon" href="/favicon.ico">
		<link rel="apple-touch-icon" href="/apple-touch-icon.png">
		<style>
			#search {
				background-color: #bbff84;
			}
		</style>
	</head>

	<body>
		<div>
			<header>
				<a href="index.html"><img id="rideme" src="logo2.png" ></a>
			</header>
			<nav>

				<ul>
					<li id="search">
						<a href="search.html"> חיפוש טרמפים </a><img class="car" src="car.png">
					</li>
					<li id="adv">
						<a href="adv.html"> פרסום טרמפים </a><img class="car" src="car.png">
					</li>
					<li id="contact">
						<a href="contact.html"> צור קשר </a><img class="car" src="car.png">
					</li>
				</ul>
	
			</nav>
			<div ng-controller="trempController">
				<form class="search-adv-form"><img src="car.png">

					<div>
						<label>מוצא:</label>
						<select ng-model="query.src" ng-click="checkNoTremps()">						
					
							<option>אופקים</option>
							<option>באר שבע</option>
							<option>תל אביב</option>
							<option>אופקים</option>
							<option>אילת</option>
						</select>
					</div>

					<div>
						<label>יעד:</label>
						<select ng-model="query.dest" ng-click="checkNoTremps()">
							<option >אופקים</option>
							<option>באר שבע</option>
							<option>תל אביב</option>
							<option>אופקים</option>
							<option>אילת</option>
						</select>
					</div>

					<div id="date" >
						<div>
							<label>תאריך:</label>
							<input id="date" type="date" ng-model="query.date" >
						</div>
						<div>
							<label> שעה:</label>
							<input id="time" type="time" ng-model="query.time">

						</div>
					</div>

					<div>
						<label>השתתפות:</label>

						<input type="number" min="0" max="120" value="{{x.payment}}" ng-model="query.payment">
						₪

						<input type="radio" name="gas" ng-value=0 ng-model="query.payment">
						<span>ללא</span>
					</div>

				</form>

				<table id="table" >
					
					<div id="results">
						נמצאו <span id="length">{{filtered.length}}</span> טרמפים
					</div>
					<tr>
						<th>מוצא:</th>
						<th>יעד:</th>
						<th>תאריך:</th>
						<th>שעה:</th>
						<th>השתתפות:</th>
						<th>שם:</th>
						<th></th>
					</tr>
					<tr ng-repeat="x in filtered = (tremps | filter: query :true)">

						<td class="tdl" onclick="td()">{{x.src}}</td>
						<td class="td">{{x.dest}}</td>
						<td class="td">{{x.date}}</td>
						<td class="td">{{x.time}}</td>
						<td class="td">{{x.payment}} ₪</td>
						<td class="td">{{x.driver}}</td>
						<td class="td">צור קשר</td>

					</tr>
				</table>

			</div>
			<footer>
				<a href="about.html">About RideWith</a>

			</footer>
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
		<script>
			var app = angular.module("trempApp", []);

			app.controller("trempController", function($scope, $http) {
				$http.get("trempInfo.json").success(function(res) {

					$scope.tremps = res;
				}).error(function(data, status, headers, config) {
					alert("שגיאה");
				});

				$scope.checkNoTremps = function() {
					var results = document.getElementById("results");
					var length = document.getElementById("length");

					if (length.innerText === "0") {
						results.innerText="לא נמצאו טרמפים";
					};
				};
			});

			app.directive('places', function() {
				return {
					restrict : 'E',
					templateUrl : 'places.html'
				};
			});




			function td() {
				var tdl = document.getElementsByClassName("td");
				tdl.style.color = "red";
			}
		</script>
	</body>
</html>